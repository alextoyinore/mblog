<% const { userAuthenticated, name, username, email } = locals.sessionUser || {}
const route = locals.route || ''
%>

<!-- Mobile nav -->
<nav
  id="sidenav"
  class="w-full lg:hidden overflow-y-auto bg-white dark:bg-black transition-all duration-300 sticky top-0"
>
  <!-- Toggle Button -->
  <button
    id="sidenavToggle"
    class="absolute hidden lg:block left-1 bottom-25 bg-white dark:bg-black border border-gray-700 dark:border-gray-700 rounded-full p-1 hover:bg-gray-50 dark:hover:bg-gray-800"
  >
    <svg
      id="toggleIcon"
      class="w-5 h-5 text-gray-600 dark:text-gray-300 transform transition-transform cursor-pointer"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M15 19l-7-7 7-7"
      />
    </svg>
  </button>

  <!-- Nav Content -->
  <div class="flex flex-col mt-4">
    <!-- Navigation Links -->
    <div class="flex-1 pr-2 py-4">
      <div class="space-y-2 text-sm">
        <!-- Home -->
        <a
          href="/"
          class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/' ? 'bg-gray-100 dark:bg-gray-800' : '' %>"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
            />
          </svg>
          <span class="nav-text">Home</span>
        </a>

        <!-- Explore -->
        <!-- <a
          href="/discover"
          class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%=// route === '/explore' ? 'bg-gray-100 dark:bg-gray-800' : '' %>"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
          <span class="nav-text">Discover</span>
        </a> -->

        <!-- Play on M1on -->
        <a
          href="/play"
          class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/play' ? 'bg-gray-100 dark:bg-gray-800' : '' %>"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
            />
          </svg>
          <span class="nav-text">Play</span>
        </a>

        <% if (userAuthenticated) { %>
          <!-- Playlists -->
          <a
            href="/playlist"
            class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/playlist' ? 'bg-gray-100 dark:bg-gray-800' : '' %>"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"
              />
            </svg>
            <span class="nav-text">Playlists</span>
          </a>

          <!-- Liked Songs -->
          <a
            href="/liked"
            class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/liked' ? 'bg-gray-100 dark:bg-gray-800' : '' %>"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
              />
            </svg>
            <span class="nav-text">Liked Songs</span>
          </a>
        <% } %>

        <!-- Other nav items -->
    <a href="/new" class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/new' ? 'bg-gray-100 dark:bg-gray-800' : '' %>">
      <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
      >
          <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 7v14a2 2 0 002 2h14a2 2 0 002-2V7M3 7l9-4 9 4M3 7l9 4 9-4"
          />
      </svg>
      <span class="nav-text">New Arrivals</span>
    </a>

    <!-- <a href="/charts" class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%=// route === '/charts' ? 'bg-gray-100 dark:bg-gray-800' : '' %>">
      <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
      >
          <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 3v18h18M3 10h18M3 17h18M3 14h18"
          />
      </svg>
      <span class="nav-text">Charts</span>
    </a> -->


    <a href="/artists" class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/artists' ? 'bg-gray-100 dark:bg-gray-800' : '' %>">
      <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
      >
          <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 11c1.104 0 2 .896 2 2s-.896 2-2 2-2-.896-2-2 .896-2 2-2zm-8 0c1.104 0 2 .896 2 2s-.896 2-2 2-2-.896-2-2 .896-2 2-2zm0 4c-2.209 0-4 1.791-4 4v1h8v-1c0-2.209-1.791-4-4-4z"
          />
      </svg>
      <span class="nav-text">Artists</span>
    </a>

    <!-- Genres Dropdown Trigger -->
    <div class="relative group">
      <a href="/genres" class="flex items-center gap-3 p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md group <%= route === '/genres' ? 'bg-gray-100 dark:bg-gray-800' : '' %>">
        <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 18V5l12-2v13M9 18c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"
            />
        </svg>
        <span class="nav-text">Genres</span>
      </a>

    </div>
  </div>
</nav>


